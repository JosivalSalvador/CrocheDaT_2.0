

> server@1.0.0 test
> npm run test:setup && dotenv -e .env.test -- vitest run

[1G[0K
> server@1.0.0 test:setup
> dotenv -e .env.test -- prisma migrate reset --force

[1G[0K[2mLoaded Prisma config from prisma.config.ts.
[22m
[2mPrisma schema loaded from prisma/schema.prisma.[22m
[2mDatasource "db": PostgreSQL database "ecommerce_test", schema "public" at "localhost:5433"[22m

Applying migration `20260112183756_init_pro_schema`
Applying migration `20260113163031_ajuste_categories`
Applying migration `20260113171037_create_users_table`

[32mDatabase reset successful[39m

The following migration(s) have been applied:

migrations/
  ‚îî‚îÄ 20260112183756_[36m[1minit_pro_schema[22m[39m/
    ‚îî‚îÄ migration.sql
  ‚îî‚îÄ 20260113163031_[36m[1majuste_categories[22m[39m/
    ‚îî‚îÄ migration.sql
  ‚îî‚îÄ 20260113171037_[36m[1mcreate_users_table[22m[39m/
    ‚îî‚îÄ migration.sql

[1G[0K‚†ô[1G[0K[?25l
[1m[46m RUN [49m[22m [36mv4.0.17 [39m[90m/home/marcosbala070/Documentos/crochedaT_2/server[39m

[?2026h
[1m[33m ‚ùØ [39m[22msrc/resources/users/tests/users.test.ts[2m [queued][22m

[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (2)[39m
[2m      Tests [22m[1m[32m0 passed[39m[22m[90m (0)[39m
[2m   Start at [22m18:06:59
[2m   Duration [22m201ms
[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K
[1m[33m ‚ùØ [39m[22msrc/resources/categories/tests/categories.test.ts[2m [queued][22m
[1m[33m ‚ùØ [39m[22msrc/resources/users/tests/users.test.ts[2m [queued][22m

[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (2)[39m
[2m      Tests [22m[1m[32m0 passed[39m[22m[90m (0)[39m
[2m   Start at [22m18:06:59
[2m   Duration [22m906ms
[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[90mstdout[2m | src/resources/users/tests/users.test.ts
[22m[39m[dotenv@17.2.3] injecting env (0) from .env.test -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops

[90mstdout[2m | src/resources/categories/tests/categories.test.ts
[22m[39m[dotenv@17.2.3] injecting env (0) from .env.test -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild


[1m[33m ‚ùØ [39m[22msrc/resources/categories/tests/categories.test.ts[2m [queued][22m
[1m[33m ‚ùØ [39m[22msrc/resources/users/tests/users.test.ts[2m 0/4[22m

[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (2)[39m
[2m      Tests [22m[1m[32m0 passed[39m[22m[90m (4)[39m
[2m   Start at [22m18:06:59
[2m   Duration [22m1.52s
[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K{"level":30,"time":1768601221267,"pid":28089,"hostname":"marcosbala070-340XAA-350XAA-550XAA","reqId":"req-1","req":{"method":"POST","url":"/api/v1/users","host":"127.0.0.1:44131","remoteAddress":"::ffff:127.0.0.1","remotePort":56876},"msg":"incoming request"}
{"level":30,"time":1768601221272,"pid":28091,"hostname":"marcosbala070-340XAA-350XAA-550XAA","reqId":"req-1","req":{"method":"POST","url":"/api/v1/categories","host":"127.0.0.1:44021","remoteAddress":"::ffff:127.0.0.1","remotePort":41238},"msg":"incoming request"}
{"level":30,"time":1768601221335,"pid":28091,"hostname":"marcosbala070-340XAA-350XAA-550XAA","reqId":"req-1","res":{"statusCode":201},"responseTime":61.250408000312746,"msg":"request completed"}
{"level":30,"time":1768601221354,"pid":28091,"hostname":"marcosbala070-340XAA-350XAA-550XAA","reqId":"req-2","req":{"method":"POST","url":"/api/v1/categories","host":"127.0.0.1:33931","remoteAddress":"::ffff:127.0.0.1","remotePort":56368},"msg":"incoming request"}
{"level":30,"time":1768601221365,"pid":28091,"hostname":"marcosbala070-340XAA-350XAA-550XAA","reqId":"req-2","res":{"statusCode":201},"responseTime":9.993431000038981,"msg":"request completed"}
{"level":30,"time":1768601221369,"pid":28091,"hostname":"marcosbala070-340XAA-350XAA-550XAA","reqId":"req-3","req":{"method":"POST","url":"/api/v1/categories","host":"127.0.0.1:40901","remoteAddress":"::ffff:127.0.0.1","remotePort":43230},"msg":"incoming request"}
{"level":30,"time":1768601221374,"pid":28089,"hostname":"marcosbala070-340XAA-350XAA-550XAA","reqId":"req-1","res":{"statusCode":201},"responseTime":105.81391499983147,"msg":"request completed"}
{"level":30,"time":1768601221377,"pid":28091,"hostname":"marcosbala070-340XAA-350XAA-550XAA","reqId":"req-3","res":{"statusCode":409},"responseTime":7.599564000032842,"msg":"request completed"}

[1m[33m ‚ùØ [39m[22msrc/resources/categories/tests/categories.test.ts[2m 1/3[22m
[1m[33m ‚ùØ [39m[22msrc/resources/users/tests/users.test.ts[2m 0/4[22m

[2m Test Files [22m[1m[32m0 passed[39m[22m[90m (2)[39m
[2m      Tests [22m[1m[32m1 passed[39m[22m[90m (7)[39m
[2m   Start at [22m18:06:59
[2m   Duration [22m1.92s
[?2026l[?2026h[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K{"level":30,"time":1768601221392,"pid":28091,"hostname":"marcosbala070-340XAA-350XAA-550XAA","reqId":"req-4","req":{"method":"GET","url":"/api/v1/categories","host":"127.0.0.1:41059","remoteAddress":"::ffff:127.0.0.1","remotePort":55764},"msg":"incoming request"}
{"level":30,"time":1768601221392,"pid":28089,"hostname":"marcosbala070-340XAA-350XAA-550XAA","reqId":"req-2","req":{"method":"POST","url":"/api/v1/users","host":"127.0.0.1:46147","remoteAddress":"::ffff:127.0.0.1","remotePort":50334},"msg":"incoming request"}
{"level":30,"time":1768601221404,"pid":28091,"hostname":"marcosbala070-340XAA-350XAA-550XAA","reqId":"req-4","res":{"statusCode":200},"responseTime":11.999478000216186,"msg":"request completed"}
 [32m‚úì[39m src/resources/categories/tests/categories.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 409[2mms[22m[39m
{"level":30,"time":1768601221425,"pid":28089,"hostname":"marcosbala070-340XAA-350XAA-550XAA","reqId":"req-2","res":{"statusCode":201},"responseTime":32.446366999763995,"msg":"request completed"}
{"level":30,"time":1768601221431,"pid":28089,"hostname":"marcosbala070-340XAA-350XAA-550XAA","reqId":"req-3","req":{"method":"POST","url":"/api/v1/users","host":"127.0.0.1:41949","remoteAddress":"::ffff:127.0.0.1","remotePort":33112},"msg":"incoming request"}
{"level":30,"time":1768601221441,"pid":28089,"hostname":"marcosbala070-340XAA-350XAA-550XAA","reqId":"req-3","res":{"statusCode":409},"responseTime":9.394404999911785,"msg":"request completed"}
{"level":30,"time":1768601221450,"pid":28089,"hostname":"marcosbala070-340XAA-350XAA-550XAA","reqId":"req-4","req":{"method":"POST","url":"/api/v1/users","host":"127.0.0.1:41431","remoteAddress":"::ffff:127.0.0.1","remotePort":51910},"msg":"incoming request"}
{"level":30,"time":1768601221476,"pid":28089,"hostname":"marcosbala070-340XAA-350XAA-550XAA","reqId":"req-4","res":{"statusCode":201},"responseTime":25.57337799994275,"msg":"request completed"}
{"level":30,"time":1768601221481,"pid":28089,"hostname":"marcosbala070-340XAA-350XAA-550XAA","reqId":"req-5","req":{"method":"POST","url":"/api/v1/sessions","host":"127.0.0.1:46099","remoteAddress":"::ffff:127.0.0.1","remotePort":34976},"msg":"incoming request"}
{"level":30,"time":1768601221507,"pid":28089,"hostname":"marcosbala070-340XAA-350XAA-550XAA","reqId":"req-5","res":{"statusCode":200},"responseTime":25.965414999984205,"msg":"request completed"}

[1m[33m ‚ùØ [39m[22msrc/resources/users/tests/users.test.ts[2m 2/4[22m

[2m Test Files [22m[1m[32m1 passed[39m[22m[90m (2)[39m
[2m      Tests [22m[1m[32m5 passed[39m[22m[90m (7)[39m
[2m   Start at [22m18:06:59
[2m   Duration [22m2.02s
[?2026l[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K[1A[K{"level":30,"time":1768601221515,"pid":28089,"hostname":"marcosbala070-340XAA-350XAA-550XAA","reqId":"req-6","req":{"method":"POST","url":"/api/v1/users","host":"127.0.0.1:34721","remoteAddress":"::ffff:127.0.0.1","remotePort":56946},"msg":"incoming request"}
{"level":30,"time":1768601221544,"pid":28089,"hostname":"marcosbala070-340XAA-350XAA-550XAA","reqId":"req-6","res":{"statusCode":201},"responseTime":28.085448999889195,"msg":"request completed"}
{"level":30,"time":1768601221547,"pid":28089,"hostname":"marcosbala070-340XAA-350XAA-550XAA","reqId":"req-7","req":{"method":"POST","url":"/api/v1/sessions","host":"127.0.0.1:39619","remoteAddress":"::ffff:127.0.0.1","remotePort":54474},"msg":"incoming request"}
{"level":30,"time":1768601221570,"pid":28089,"hostname":"marcosbala070-340XAA-350XAA-550XAA","reqId":"req-7","res":{"statusCode":401},"responseTime":22.16150499973446,"msg":"request completed"}
 [32m‚úì[39m src/resources/users/tests/users.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 570[2mms[22m[39m

[2m Test Files [22m [1m[32m2 passed[39m[22m[90m (2)[39m
[2m      Tests [22m [1m[32m7 passed[39m[22m[90m (7)[39m
[2m   Start at [22m 18:06:59
[2m   Duration [22m 2.18s[2m (transform 585ms, setup 0ms, import 2.63s, tests 979ms, environment 1ms)[22m

[?25h[1G[0K‚†ô[1G[0K
